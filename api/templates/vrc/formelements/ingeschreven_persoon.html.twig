
<div class="form-group">
    <label class="input__label" for="bsn">Bsn</label>
    <input class="form-control mb-3" id="bsn" type="text">


    <button type="button" onclick="getBagKeys()" class="btn btn-info">Zoeken</button>
</div>

<hr style="margin-top: 20px;">


<div class="form-control" id="personLijst" style="margin-top: 20px; margin-bottom: 20px; display: none">
</div>
<input type="hidden" value="{{ property.name }}" name="newPropName">


<script>

    function getBagKeys(){
        $('#personLijst').show();
        let bsn = document.getElementById('bsn').value;

        let list = document.getElementById('personLijst');
        while(list.firstChild){
            list.firstChild.remove();
        }



        $.ajax({
            url: "/api/brp/ingeschrevenpersonen",
            type: 'GET',
            processData: true,
            headers: {
                Accept: 'application/json'
            },
            data: { bsn:bsn },
            statusCode: {
                404: function() {
                    console.log( "page not found" );
                },
                500: function() {
                    console.log( "internal server error" );
                },
                200: function() {
                    console.log( "worked" );
                }
            },
            success: function(result) {
                console.log(result);
                $('.spinner').hide();
                if(result.length >= 1){
                    $('#personLijst').append('<legend class="input__legend">Persoon:</legend>')
                    for(let i = 0; i < result.length; i++){

                    }
                } else {
                    $('#personLijst').append('<p>Geen persoon gevonden op het meegegeven Bsn nummer</p>');
                }
            },
        });

    }


</script>
