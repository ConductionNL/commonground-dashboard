{% extends "body.html.twig" %}

{% block content %}

    <div class="main-panel">
        <div class="container">

            {% include 'widgets/dashboard_h1.html.twig' %}

            <div class="page-inner mt--5">
                <div class="row">                
					<div class="col-md-8">
						<div class="card">							
		                	<form method="post" action="#" class="affa-form-contact" >
    							<div class="card-header">
    								<div class="card-title">Resource without template</div>
    							</div><!-- /.card-header -->
    							<div class="card-body">
    									{{ jsondump }}
    									{# for key,property in resource._embedded %}
    										{% if property is not iterable %}
    										    {{ key }} -> {{ property }}
    										{% else %}
    									    {% for subkey,subproperty in property %}
    										{% if subproperty is not iterable %}
    									    	{{ key }} -> {{ subkey }} -> {{ property }}
    									    {% endif %}
    									    {% endfor %}
    											
    										{% endif %}
    									
    									{% endfor #}
    							</div><!-- /.card-body -->
    							<div class="card-action">
    								
    							</div><!-- /.card-action -->
							</form>
						</div><!-- /.card -->
						
                	</div><!-- /.col -->
					<div class="col-md-4">
						<div class="card">							
    							<div class="card-header">
    								<div class="card-title">Connected Resources</div>
    							</div><!-- /.card-header -->
    							<div class="card-body">			
    								<small class="form-text text-muted">This resource is connected to the following resources</small>	
    							
    							
            				   {% for name, links in resource._links %}
            				   		{% if name != "self" %}
            				   		<br> 
            				   		<p>
            				   	   		<b>{{ name|capitalize }}</b>
                				        {% for href, link in links %}
                				        
    										{% if link is iterable %}
                				        {% set resource = commonground_resource(component.href~link.href) %}
                				   	    {# <a href="">{{ commonground_resource(page.href).name }}</a> #}
                				   	    {# if link matches '^\/' %}
                				   	 	<br> {{ component.href }}{{ link.href }}
                                        {% else #}
                				   	 	<br><a href="{{ path('app_component_resource',{'component':'requests','resource':link.href}) }}">{% if resource.name is defined %}{{ resource.name }}{% else %}{{ resource.id }}{% endif %}</a>
                                        {% endif %}
                				       {% endfor %}
                				   </p>
                				   {% endif %}
            				   {% endfor %}
    							</div><!-- /.card-body -->
						</div><!-- /.card -->
                	</div><!-- /.col -->
            	</div><!-- /.row -->
            </div><!-- /.page-inner -->
        </div><!-- /.container -->

    {% include 'footer.html.twig' %}

    </div><!-- /.main-panel- -->

{% endblock %}

{% block javascript %}
	<!-- Summernote -->
	<script src="/assets/js/plugin/summernote/summernote-bs4.min.js"></script>
	
	<script>
		$('#content').summernote({
			placeholder: 'Atlantis',
			fontNames: ['Arial', 'Arial Black', 'Comic Sans MS', 'Courier New'],
			tabsize: 2,
			height: 300
		});
	</script>
{% endblock %}
